{"version":3,"sources":["webpack:///webpack/bootstrap 009b1d08ddb0433d8bdd","webpack:///./src/index.js","webpack:///external \"angular\"","webpack:///./src/treeChooser/index.js","webpack:///./src/treeChooser/treeChooser.directive.js","webpack:///./src/treeChooser/treeChooser.css","webpack:///./src/treeChooser/treeChooser.html","webpack:///./src/treeChooser/treeChooser.controller.js","webpack:///external {\"commonjs\":\"lodash\"}","webpack:///./src/treeChooserItem/index.js","webpack:///./src/treeChooserItem/treeChooserItem.directive.js","webpack:///./src/treeChooserItem/treeChooserItem.html","webpack:///./src/treeChooserItem/treeChooserItem.controller.js","webpack:///./src/treeChooserItem/treeChooserItem.factory.js"],"names":["angular","require","treeChooser","module","exports","directive","controller","TreeChooser","$timeout","bindToController","controllerAs","scope","treeData","idProperty","labelProperty","listLabelProperty","childrenProperty","deselectsChildren","disableNode","filterNode","filterAutoShowLength","multiselect","ngDisabled","ngPlaceholder","onlyLeaves","restrictModel","selectsChildren","enablePills","modelAsId","disableClick","template","link","element","input","querySelector","on","event","stopPropagation","list","treeChooserDiv","addTabindex","vm","tabindex","removeTabindex","focusTreeChooserDiv","focus","focusInput","focusList","getListStyles","top","parentNode","offsetHeight","width","offsetWidth","scrollActive","active","scrollTop","offsetTop","TreeChooserController","$element","$scope","$window","TreeChooserItem","_","show","shown","next","addEventListener","closeFromClick","tryShow","$event","includes","get","relatedTarget","close","filterText","reset","clearActive","removeEventListener","$apply","forEach","itemsFlat","item","setActive","setExpanded","onListKeyDown","shouldStop","keyCode","toggleSelectedActive","prev","collapseActive","expandActive","preventDefault","onTextKeyDown","isEmpty","ngModel","$viewValue","isNil","removeFromModel","findActive","first","find","isShowing","start","findIndex","isActive","index","last","findLast","isTab","isSelected","toggleSelected","setSelected","selectChildren","getPresentChildren","child","deselectChildren","getChildren","value","isLeaf","addToModel","getItem","getPresentItems","filter","items","isPresent","isMatch","setExclusions","parentMatched","setExcluded","hasAChildPresent","showAll","resetActive","clearBranches","getModelAsItems","map","invoke","itemsIndex","compact","getId","push","$validate","$setViewValue","id","properties","remove","pop","syncModelToItems","debounce","model","$modelValue","toDelete","checkItem","isInitialLoad","createItems","flattenItems","flattenDeep","$onInit","label","listLabel","children","isUndefined","isNumber","isFunction","toLower","stubFalse","$isEmpty","registerWatches","$watch","size","$watchCollection","keyBy","factory","TreeChooserItemController","chooserVm","TreeChooserItemFactory","parent","excluded","expanded","selected","prototype","getListLabel","isExpanded","toggleExpanded"],"mappings":"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","file":"tree-chooser.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 009b1d08ddb0433d8bdd","var angular = require('angular');\n\nvar treeChooser = angular.module('treeChooser', []);\n\nrequire('./treeChooser')(treeChooser);\nrequire('./treeChooserItem')(treeChooser);\n\nmodule.exports = treeChooser;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"angular\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"angular\"\n// module id = 1\n// module chunks = 0 1","'use strict';\n\nmodule.exports = function (treeChooser) {\n  treeChooser\n    .directive('treeChooser', require('./treeChooser.directive'))\n    .controller('treeChooserController', require('./treeChooser.controller'));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/treeChooser/index.js","'use strict';\n\n/*@ngInject*/\nfunction TreeChooser($timeout) {\n  require('./treeChooser.css');\n\n  var angular = require('angular');\n\n  return {\n    bindToController: true,\n    controller: 'treeChooserController',\n    controllerAs: 'vm',\n    require: ['ngModel'],\n    scope: {\n      /**\n       * Tree data structure\n       * @type {Array.<Object>}\n       */\n      treeData: '=treeChooser',\n\n      /**\n       * Property that contains unique ID\n       * @type {string}\n       */\n      idProperty: '@',\n\n      /**\n       * Property that contains label\n       * @todo alternately support template\n       * @type {string}\n       */\n      labelProperty: '@',\n\n      /**\n       * Property that contains list label\n       * @type {string}\n       */\n      listLabelProperty: '@',\n\n      /**\n       * Property that contains children array\n       * @type {string}\n       */\n      childrenProperty: '@',\n\n      /**\n       * Deselect all descendants\n       * @type {boolean}\n       */\n      deselectsChildren: '=?',\n\n      /**\n       * Function to determine if item is disabled\n       * @type {Function}\n       */\n      disableNode: '=?',\n\n      /**\n       * Function to determine if item is filtered\n       * @type {Function}\n       */\n      filterNode: '=?',\n\n      /**\n       * Show list and expand all nodes after specified length\n       * @type {number}\n       */\n      filterAutoShowLength: '=?',\n\n      /**\n       * Enable multiselection\n       * @type {boolean}\n       */\n      multiselect: '=?',\n\n      /**\n       * ngDisabled pass through\n       * @type {boolean}\n       */\n      ngDisabled: '=?',\n\n      /**\n       * ngPlaceholder pass through\n       * @type {boolean}\n       */\n      ngPlaceholder: '=?',\n\n      /**\n       * Only allow selection of leaf nodes\n       * @type {boolean}\n       */\n      onlyLeaves: '=?',\n\n      /**\n       * Restrict model to members of tree data structure\n       * @type {boolean}\n       */\n      restrictModel: '=?',\n\n      /**\n       * Select all descendants\n       * @type {boolean}\n       */\n      selectsChildren: '=?',\n\n      /**\n       * Enable pills\n       * @type {boolean}\n       */\n      enablePills: '=?',\n\n      /**\n       * Just use the ID as the model value?\n       * @type {boolean}\n       */\n      modelAsId: '=?',\n\n      /**\n       * Disable outside click to close\n       * @type {boolean}\n       */\n      disableClick: '=?'\n    },\n    template: require('./treeChooser.html'),\n    link: function (scope, element) {\n      var input = angular.element(element[0].querySelector('.treeChooser-input input'));\n      input.on('click', function (event) {\n        event.stopPropagation();\n      });\n\n      var list = angular.element(element[0].querySelector('.treeChooser-list'));\n      list.on('click', function (event) {\n        event.stopPropagation();\n      });\n\n      var treeChooserDiv = angular.element(element[0].querySelector('.treeChooser'));\n      scope.addTabindex = function () {\n        this.vm.tabindex = '0';\n      };\n      scope.removeTabindex = function () {\n        this.vm.tabindex = '-1';\n      };\n      scope.focusTreeChooserDiv = function () {\n        scope.addTabindex();\n        $timeout(function () {\n          treeChooserDiv[0].focus();\n        });\n      };\n\n      scope.focusInput = function () {\n        $timeout(function () {\n          input[0].focus();\n        });\n      };\n\n      scope.focusList = function () {\n        $timeout(function () {\n          list[0].focus();\n        });\n      };\n\n      scope.getListStyles = function () {\n        return {\n          top: input[0].parentNode.offsetHeight + 'px',\n          width: input[0].parentNode.offsetWidth + 'px'\n        };\n      };\n\n      scope.scrollActive = function () {\n        $timeout(function () {\n          var active = element[0].querySelector('.treeChooser-active .treeChooser-label');\n          // If no results are shown, there won't be an active!\n          if (active) {\n            list[0].scrollTop = active.offsetTop;\n          }\n        });\n      };\n    }\n  };\n}\n\nmodule.exports = TreeChooser;\n\n\n\n// WEBPACK FOOTER //\n// ./src/treeChooser/treeChooser.directive.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/treeChooser/treeChooser.css\n// module id = 4\n// module chunks = 0 1","module.exports = \"<div class=treeChooser ng-attr-tabindex={{vm.tabindex}}> <div class=treeChooser-input ng-class=\\\"{'treeChooser-input-focused': vm.focused}\\\"> <span ng-if=vm.enablePills ng-click=\\\"vm.removeFromModel(item); focusInput();\\\" ng-repeat=\\\"item in vm.getModelAsItems()\\\"> {{item[vm.properties.label]}} </span> <input type=text ng-disabled=vm.ngDisabled ng-model=vm.filterText ng-keydown=vm.onTextKeyDown($event) ng-focus=\\\"vm.focused = true; vm.tryShow($event);\\\" ng-blur=\\\"vm.focused = false\\\" placeholder={{vm.ngPlaceholder}}> </div> <ul ng-show=vm.shown ng-keydown=vm.onListKeyDown($event) ng-style=getListStyles() class=treeChooser-list tabindex=-1> <li ng-repeat=\\\"item in vm.getPresentItems()\\\" tree-chooser-item=item></li> <li ng-if=!vm.getPresentItems().length>No match</li> </ul> </div> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/treeChooser/treeChooser.html\n// module id = 8\n// module chunks = 0 1","'use strict';\n\n/*@ngInject*/\nfunction TreeChooserController(\n  $element,\n  $scope,\n  $timeout,\n  $window,\n  TreeChooserItem\n) {\n  var vm = this,\n    _ = require('lodash');\n\n  // @todo create a separate directive for the list\n\n  /**\n   * Show the search results, add outside click handler\n   */\n  vm.show = function () {\n    if (vm.shown) {\n      return;\n    }\n\n    vm.shown = true;\n\n    vm.next();\n\n    // Add event listener to determine when user clicks outside of tree chooser\n    if (!vm.disableClick) {\n      $timeout(function () {\n        $window.addEventListener('click', vm.closeFromClick);\n      });\n    }\n  };\n\n  /**\n   * Show on focus, unless returning from the list\n   * @param {Event} $event\n   */\n  vm.tryShow = function ($event) {\n    if (_.includes(_.get($event.relatedTarget, 'className'), 'treeChooser-list')) {\n      return;\n    }\n    vm.show();\n  };\n\n  /**\n   * Close the search results, remove outside click handler\n   */\n  vm.close = function () {\n    vm.filterText = '';\n    vm.reset();\n    vm.shown = false;\n    vm.clearActive();\n    if (!vm.disableClick) {\n      $window.removeEventListener('click', vm.closeFromClick);\n    }\n  };\n\n  /**\n   * Close on outside click\n   */\n  vm.closeFromClick = function () {\n    vm.close();\n    $scope.$apply();\n  };\n\n  /**\n   * Reset the collapsed and active state\n   */\n  vm.reset = function () {\n    _.forEach(vm.itemsFlat, function (item) {\n      item.setActive(false);\n      item.setExpanded(false);\n    });\n  };\n\n  /**\n   * Handle results keyboard navigation\n   * @param {Object} $event\n   */\n  vm.onListKeyDown = function ($event) {\n    var shouldStop = false;\n\n    switch ($event.keyCode) {\n      case 27: //Escape\n        shouldStop = true;\n        vm.close();\n        $scope.focusInput();\n        break;\n      case 13: //Enter\n        shouldStop = true;\n        vm.toggleSelectedActive();\n        vm.close();\n        $scope.focusInput();\n        break;\n      case 40: //Down Arrow\n        shouldStop = true;\n        vm.next();\n        break;\n      case 38: //Up Arrow\n        shouldStop = true;\n        vm.prev();\n        break;\n      case 37: //Left Arrow\n        shouldStop = true;\n        vm.collapseActive();\n        break;\n      case 39: //Right Arrow\n        shouldStop = true;\n        vm.expandActive();\n        break;\n      case 32: //Space\n        shouldStop = true;\n        vm.toggleSelectedActive();\n        break;\n      case 9: //Tab\n        vm.toggleSelectedActive(true);\n        vm.close();\n        break;\n    }\n\n    if (shouldStop) {\n      $event.preventDefault();\n      $event.stopPropagation();\n    }\n  };\n\n  /**\n   * Handle input keyboard navigation\n   * @param {Object} $event\n   */\n  vm.onTextKeyDown = function ($event) {\n    switch ($event.keyCode) {\n      case 27: //Escape\n        vm.close();\n        break;\n      case 13: //Enter\n        if (vm.shown) {\n          vm.toggleSelectedActive();\n        } else {\n          vm.show($event);\n        }\n        break;\n      case 40: //Down Arrow\n        vm.show($event);\n        $scope.focusList();\n        break;\n      case 8: //Backspace\n        if (_.isEmpty(vm.filterText) && (vm.multiselect ? !_.isEmpty(vm.ngModel.$viewValue) : !_.isNil(vm.ngModel.$viewValue))) {\n          vm.removeFromModel();\n        }\n        break;\n      case 9: //Tab\n        vm.toggleSelectedActive(true);\n        vm.close();\n        break;\n    }\n  };\n\n  /**\n   * Find next visible item\n   */\n  vm.next = function () {\n    if (_.isEmpty(vm.itemsFlat)) {\n      return;\n    }\n\n    var active = vm.findActive();\n\n    if (!active) {\n      var first = _.find(vm.itemsFlat, function (item) {\n        return item.isShowing();\n      });\n      // If no results are shown, there's nothing to set first!\n      if (first) {\n        first.setActive(true);\n      }\n    } else {\n      var start = _.findIndex(vm.itemsFlat, function (item) {\n        return item.isActive();\n      });\n      active.setActive(false);\n\n      // @todo optimize array traversal\n      var next = _.find(vm.itemsFlat, function (item, index) {\n        return index > start && item.isShowing();\n      });\n      if (!next) {\n        next = _.find(vm.itemsFlat, function (item, index) {\n          return index < start && item.isShowing();\n        });\n      }\n      if (next) {\n        next.setActive(true);\n      }\n    }\n\n    $scope.scrollActive();\n  };\n\n  /**\n   * Find previous visible item\n   */\n  vm.prev = function () {\n    var active = vm.findActive();\n\n    if (!active) {\n      var last = _.findLast(vm.itemsFlat, function (item) {\n        return item.isShowing();\n      });\n      // If no results are shown, there's nothing to set last!\n      if (last) {\n        last.setActive(true);\n      }\n    } else {\n      var start = _.findIndex(vm.itemsFlat, function (item) {\n        return item.isActive();\n      });\n      active.setActive(false);\n\n      // @todo optimize array traversal\n      var prev = _.findLast(vm.itemsFlat, function (item, index) {\n        return index < start && item.isShowing();\n      });\n      if (!prev) {\n        prev = _.findLast(vm.itemsFlat, function (item, index) {\n          return index > start && item.isShowing();\n        });\n      }\n      if (prev) {\n        prev.setActive(true);\n      }\n    }\n\n    $scope.scrollActive();\n  };\n\n  /**\n   * Expand active item\n   */\n  vm.expandActive = function () {\n    var active = vm.findActive();\n    if (active) {\n      active.setExpanded(true);\n    }\n  };\n\n  /**\n   * Collapse active item\n   */\n  vm.collapseActive = function () {\n    var active = vm.findActive();\n    if (active) {\n      active.setExpanded(false);\n    }\n  };\n\n  /**\n   * Set all items inactive\n   */\n  vm.clearActive = function () {\n    _.forEach(vm.itemsFlat, function (item) {\n      item.setActive(false);\n    });\n  };\n\n  /**\n   * Toggle selection on active item\n   * @param {boolean} [isTab]\n   */\n  vm.toggleSelectedActive = function (isTab) {\n    var active = vm.findActive();\n    if (active) {\n      // Don't unselect on tab\n      if (isTab && active.isSelected()) {\n        return;\n      }\n      vm.toggleSelected(active);\n    }\n  };\n\n  /**\n   * Get the active item\n   */\n  vm.findActive = function () {\n    return _.find(vm.itemsFlat, function (item) {\n      return item.isActive();\n    });\n  };\n\n  /**\n   * Toggle selected unless disabled\n   */\n  vm.toggleSelected = function (item) {\n    if (vm.disableNode(item)) {\n      return;\n    }\n\n    vm.setSelected(item, !item.isSelected());\n    if (item.isSelected() && !vm.multiselect) {\n      vm.close();\n    }\n  };\n\n  /**\n   * Select all unfiltered children\n   */\n  vm.selectChildren = function (item) {\n    _.forEach(item.getPresentChildren(), function (child) {\n      if (!child.isSelected()) {\n        vm.setSelected(child, true);\n      }\n      vm.selectChildren(child);\n    });\n  };\n\n  /**\n   * Deselect all children\n   */\n  vm.deselectChildren = function (item) {\n    _.forEach(item.getChildren(), function (child) {\n      if (child.isSelected()) {\n        vm.setSelected(child, false);\n      }\n      vm.deselectChildren(child);\n    });\n  };\n\n  /**\n   * Set selection state\n   */\n  vm.setSelected = function (item, value) {\n    // Enforce leaf only restrictions if necessary\n    if (value && vm.onlyLeaves && !item.isLeaf()) {\n      value = false;\n    }\n    item.setSelected(value);\n    if (value) {\n      vm.addToModel(item);\n      if (vm.selectsChildren && vm.multiselect) {\n        vm.selectChildren(item);\n      } else if (!vm.selectsChildren && !vm.multiselect) {\n        $scope.focusTreeChooserDiv();\n      }\n    } else {\n      vm.removeFromModel(item.getItem());\n      if (vm.deselectsChildren && vm.multiselect) {\n        vm.deselectChildren(item);\n      }\n    }\n  };\n\n  /**\n   * Get top level present items\n   */\n  vm.getPresentItems = function () {\n    return _.filter(vm.items, function (item) {\n      return item.isPresent();\n    });\n  };\n\n  /**\n   * Determine if visible or not\n   * @todo isMatch, isPresent, isExcluded, etc all needs to better naming\n   */\n  vm.isMatch = function (item) {\n    if (!vm.filterText) {\n      return true;\n    }\n    return vm.filterNode(item.getItem(), vm.filterText);\n  };\n\n  /**\n   * Recursively set exclusions so that parents of included children aren't hidden\n   * @param {Array} items\n   * @param {boolean} parentMatched\n   */\n  vm.setExclusions = function (items, parentMatched) {\n    _.forEach(items, function (item) {\n      vm.setExclusions(item.getChildren(), parentMatched || vm.isMatch(item));\n      item.setExcluded(!vm.isMatch(item) && !item.hasAChildPresent() && !parentMatched);\n    });\n  };\n\n  /**\n   * Recursively set exclusions so that parents of included children aren't hidden\n   */\n  vm.showAll = function () {\n    _(vm.itemsFlat)\n      .filter(function (item) {\n        return item.isPresent();\n      })\n      .forEach(function (item) {\n        item.setExpanded(true);\n      });\n\n    vm.show();\n  };\n\n  /**\n   * Set active property to false if active item exists\n   */\n  vm.resetActive = function () {\n    var active = vm.findActive();\n    if (active) {\n      active.setActive(false);\n    }\n  };\n\n  /**\n   * Clear all no leaves\n   * @todo if deselect Children is enabled, won't this deselect leaves?\n   */\n  vm.clearBranches = function () {\n    _.forEach(vm.itemsFlat, function (item) {\n      if (!item.isLeaf() && item.isSelected()) {\n        vm.setSelected(item, false);\n      }\n    });\n  };\n\n  /**\n   * Get model as items because it could be saved as id\n   */\n  vm.getModelAsItems = function () {\n    return _(vm.multiselect ? vm.ngModel.$viewValue : [vm.ngModel.$viewValue])\n      .map(function (item) {\n        // Can' guarantee the item still exists unless restrict model is on\n        return vm.modelAsId ? _.invoke(vm.itemsIndex[item], 'getItem') : item;\n      })\n      .compact()\n      .value();\n  };\n\n  /**\n   * Add item to model and trigger validation\n   */\n  vm.addToModel = function (item) {\n    var value = vm.modelAsId ? item.getId() : item.getItem();\n    if (vm.multiselect) {\n      vm.ngModel.$viewValue.push(value);\n      vm.ngModel.$validate();\n    } else {\n      vm.ngModel.$setViewValue(value);\n    }\n  };\n\n  /**\n   * Remove item from model and trigger validation\n   */\n  vm.removeFromModel = function (item) {\n    if (!vm.multiselect) {\n      vm.ngModel.$setViewValue(null);\n      $scope.removeTabindex();\n    } else {\n      if (item) {\n        var id = _.get(item, vm.properties.id);\n        _.remove(vm.ngModel.$viewValue, function (item) {\n          return vm.modelAsId ? item === id : _.get(item, vm.properties.id) === id;\n        });\n      } else {\n        vm.ngModel.$viewValue.pop();\n      }\n      vm.ngModel.$validate();\n    }\n  };\n\n  /**\n   * Sync model to items in case model, items or restrictModel changes\n   */\n  vm.syncModelToItems = _.debounce(function () {\n    _.forEach(vm.itemsFlat, function (item) {\n      item.setSelected(false);\n    });\n\n    var model = vm.multiselect ? vm.ngModel.$modelValue : [vm.ngModel.$modelValue];\n\n    var toDelete = [];\n    // Set selected items back to true\n    _.forEach(model, function (item) {\n      var id = vm.modelAsId ? item : _.get(item, vm.properties.id);\n      var checkItem = vm.itemsIndex[id];\n      if (checkItem) {\n        checkItem.setSelected(true);\n        if (vm.isInitialLoad) {\n          vm.isInitialLoad = false;\n          if (!vm.selectsChildren && !vm.multiselect) {\n            $scope.addTabindex();\n          }\n        }\n      } else if (vm.restrictModel) {\n        toDelete.push(item);\n      }\n    });\n\n    _.forEach(toDelete, function (item) {\n      vm.removeFromModel(item);\n    });\n\n    // This is debounced, so ensure scope is applied!\n    $scope.$apply();\n  });\n\n  /**\n   * Create TreeChooserItem hierarchy\n   */\n  vm.createItems = function (items) {\n    return _.map(items, function (item) {\n      return new TreeChooserItem(item, null, vm.properties);\n    });\n  };\n\n  /**\n   * Flatten hierarchy for more efficient processing\n   */\n  vm.flattenItems = function (items) {\n    return _(items)\n      .map(function (item) {\n        return [item, vm.flattenItems(item.getChildren())];\n      })\n      .flattenDeep()\n      .value();\n  };\n\n  /**\n   * Set the active element on search\n   */\n  vm.setActive = function () {\n    vm.resetActive();\n    var first;\n    if (vm.onlyLeaves) {\n      // Find first present leaf in flat items\n      first = _.find(vm.itemsFlat, function (item) {\n        return item.isLeaf() && item.isPresent();\n      });\n    } else {\n      // Find first present branch, at least one branch will be present in items\n      first = _.find(vm.items, function (item) {\n        return item.isPresent();\n      });\n    }\n\n    if (first) {\n      first.setActive(true);\n    }\n  };\n\n  this.$onInit = function () {\n    // Flag to determine whether search results are showing\n    vm.shown = false;\n\n    // flag indicating that this is the initial load\n    vm.isInitialLoad = true;\n\n    // default .treeChooser tabindex value\n    vm.tabindex='-1';\n\n    // Properties use to access special parts of item\n    vm.properties = {\n      id: vm.idProperty || 'id',\n      label: vm.labelProperty || 'label',\n      listLabel: vm.listLabelProperty || vm.labelProperty || 'label',\n      children: vm.childrenProperty || 'children'\n    };\n\n    // Enable multiselect by default\n    if (_.isUndefined(vm.multiselect)) {\n      vm.multiselect = true;\n    }\n    // Disable only leaves by default\n    if (_.isUndefined(vm.onlyLeaves)) {\n      vm.onlyLeaves = false;\n    }\n    // Disable selects children by default\n    if (_.isUndefined(vm.selectsChildren)) {\n      vm.selectsChildren = false;\n    }\n    // Disable deselects children by default\n    if (_.isUndefined(vm.deselectsChildren)) {\n      vm.deselectsChildren = false;\n    }\n    // Disable restrict model by default\n    if (_.isUndefined(vm.restrictModel)) {\n      vm.restrictModel = false;\n    }\n    // Enable pills by default\n    if (_.isUndefined(vm.enablePills)) {\n      vm.enablePills = true;\n    }\n    // Save ID to model by default\n    if (_.isUndefined(vm.modelAsId)) {\n      vm.modelAsId = true;\n    }\n    // Auto show after specified filter text length\n    if (!_.isNumber(vm.filterAutoShowLength)) {\n      vm.filterAutoShowLength = 2;\n    }\n    // Default filter node function\n    if (!_.isFunction(vm.filterNode)) {\n      vm.filterNode = function (item, filterText) {\n        return _.includes(_.toLower(_.get(item, vm.properties.listLabel)), _.toLower(filterText)) ||\n          _.includes(_.toLower(_.get(item, vm.properties.label)), _.toLower(filterText));\n      };\n    }\n    // Default disable node function\n    if (!_.isFunction(vm.disableNode)) {\n      vm.disableNode = _.stubFalse;\n    }\n    // Default to enable close to click\n    if (!_.isUndefined(vm.disableClick)) {\n      vm.disableClick = false;\n    }\n\n    // Get access to ngModel\n    vm.ngModel = $element.controller('ngModel');\n    // And override $isEmpty to account for array emptiness if multiselect\n    if (vm.multiselect) {\n      vm.ngModel.$isEmpty = _.isEmpty;\n    }\n\n    this.registerWatches();\n  };\n\n  this.registerWatches = function () {\n    /**\n     * Update exclusions on filter text change\n     */\n    $scope.$watch('vm.filterText', function () {\n      vm.setExclusions(vm.items);\n      if (_.size(vm.filterText) >= vm.filterAutoShowLength) {\n        vm.showAll();\n        vm.setActive();\n      } else {\n        vm.reset();\n      }\n    });\n\n    /**\n     * Sync on model change\n     */\n    $scope.$watchCollection('vm.ngModel.$modelValue', function () {\n      vm.syncModelToItems();\n    });\n\n    /**\n     * Sync on items change\n     */\n    $scope.$watch('vm.treeData', function () {\n      // @todo is this manual GC needed?\n      _.forEach(vm.itemsFlat, function (item, index) {\n        delete vm.itemsFlat[index];\n      });\n\n      // Create chooser items, so the underlying model is not touched\n      vm.items = vm.createItems(vm.treeData);\n      // Flatten into a sorted list for easier navigation\n      vm.itemsFlat = vm.flattenItems(vm.items);\n      // Item index\n      vm.itemsIndex = _.keyBy(vm.itemsFlat, function (item) {\n        return item.getId();\n      });\n\n      vm.syncModelToItems();\n    });\n\n    /**\n     * Sync on restrict model\n     */\n    $scope.$watch('vm.restrictModel', function (value) {\n      if (value) {\n        vm.syncModelToItems();\n      }\n    });\n\n    /**\n     * Deselect branches on only leaves true\n     */\n    $scope.$watch('vm.onlyLeaves', function (value) {\n      if (value) {\n        vm.clearBranches();\n      }\n    });\n\n    /**\n     * Disable results on disable\n     */\n    $scope.$watch('vm.ngDisabled', function (value) {\n      if (value) {\n        vm.close();\n      }\n    });\n  };\n}\n\nmodule.exports = TreeChooserController;\n\n\n\n// WEBPACK FOOTER //\n// ./src/treeChooser/treeChooser.controller.js","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"lodash\"}\n// module id = 10\n// module chunks = 0 1","'use strict';\n\nmodule.exports = function (treeChooser) {\n  treeChooser\n    .directive('treeChooserItem', require('./treeChooserItem.directive'))\n    .controller('treeChooserItemController', require('./treeChooserItem.controller'))\n    .factory('TreeChooserItem', require('./treeChooserItem.factory'));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/treeChooserItem/index.js","'use strict';\n\nfunction TreeChooserItem() {\n  return {\n    bindToController: true,\n    controller: 'treeChooserItemController',\n    controllerAs: 'vm',\n    require: '^treeChooser',\n    scope: {\n      item: '=treeChooserItem'\n    },\n    template: require('./treeChooserItem.html'),\n  };\n}\n\nmodule.exports = TreeChooserItem;\n\n\n\n// WEBPACK FOOTER //\n// ./src/treeChooserItem/treeChooserItem.directive.js","module.exports = \"<span class=treeChooser-item ng-class=\\\"{'treeChooser-selected': vm.item.isSelected(), 'treeChooser-active': vm.item.isActive()}\\\"> <span class=treeChooser-expansion ng-click=\\\"vm.chooserVm.clearActive(); vm.item.setActive(true); vm.item.toggleExpanded()\\\"> <span ng-show=\\\"vm.item.hasAChildPresent() && vm.item.isExpanded()\\\" class=treeChooser-expanded>-</span> <span ng-show=\\\"vm.item.hasAChildPresent() && !vm.item.isExpanded()\\\" class=treeChooser-collapsed>+</span> </span> <span class=treeChooser-label ng-class=\\\"{'treeChooser-disabled': vm.chooserVm.disableNode(vm.item)}\\\" ng-click=\\\"vm.chooserVm.clearActive(); vm.item.setActive(true); vm.chooserVm.toggleSelected(vm.item)\\\"> {{vm.item.getListLabel()}} </span> <ul ng-if=vm.item.isExpanded()> <li ng-repeat=\\\"item in vm.item.getPresentChildren()\\\" tree-chooser-item=item></li> </ul> </span> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/treeChooserItem/treeChooserItem.html\n// module id = 13\n// module chunks = 0 1","'use strict';\n\n/*@ngInject*/\nfunction TreeChooserItemController ($element) {\n  var vm = this;\n  vm.chooserVm = $element.controller('treeChooser');\n}\n\nmodule.exports = TreeChooserItemController;\n\n\n\n// WEBPACK FOOTER //\n// ./src/treeChooserItem/treeChooserItem.controller.js","'use strict';\n\nfunction TreeChooserItemFactory () {\n  var _ = require('lodash');\n\n  function TreeChooserItem(item, parent, properties) {\n    this.item = item; // @todo use this for templates\n\n    this.properties = properties;\n    this.id = _.get(this.item, this.properties.id);\n    this.label = _.get(this.item, this.properties.label);\n    this.listLabel = _.get(this.item, this.properties.listLabel) || this.label;\n\n    this.parent = parent;\n\n    this.active = false;\n    this.excluded = false;\n    this.expanded = false;\n    this.selected = false;\n\n    var children = _.get(item, properties.children);\n    this.children = _.map(children, (child) => {\n      return new TreeChooserItem(child, this, properties);\n    });\n  }\n\n  TreeChooserItem.prototype.getItem = function () {\n    return this.item;\n  };\n\n  TreeChooserItem.prototype.getChildren = function () {\n    return this.children;\n  };\n\n  TreeChooserItem.prototype.hasAChildPresent = function () {\n    return !!_.find(this.getChildren(), function (child) {\n      return child.isPresent();\n    });\n  };\n\n  TreeChooserItem.prototype.getPresentChildren = function () {\n    return _.filter(this.getChildren(), function (child) {\n      return child.isPresent();\n    });\n  };\n\n  TreeChooserItem.prototype.getId = function () {\n    return this.id;\n  };\n\n  TreeChooserItem.prototype.getListLabel = function () {\n    return this.listLabel;\n  };\n\n  TreeChooserItem.prototype.isActive = function () {\n    return this.active;\n  };\n\n  TreeChooserItem.prototype.isLeaf = function () {\n    return _.isEmpty(this.children);\n  };\n\n  TreeChooserItem.prototype.isShowing = function () {\n    return this.isPresent() && (!this.parent || this.parent.isExpanded());\n  };\n\n  TreeChooserItem.prototype.isPresent = function () {\n    return !this.excluded;\n  };\n\n  TreeChooserItem.prototype.isExpanded = function () {\n    return this.expanded;\n  };\n\n  TreeChooserItem.prototype.isSelected = function () {\n    return this.selected;\n  };\n\n  TreeChooserItem.prototype.setActive = function (value) {\n    this.active = value;\n  };\n\n  TreeChooserItem.prototype.setExcluded = function (value) {\n    this.excluded = value;\n  };\n\n  TreeChooserItem.prototype.setExpanded = function (value) {\n    this.expanded = value;\n  };\n\n  TreeChooserItem.prototype.setSelected = function (value) {\n    this.selected = value;\n  };\n\n  TreeChooserItem.prototype.toggleExpanded = function () {\n    this.expanded = !this.expanded;\n  };\n\n  return TreeChooserItem;\n}\n\nmodule.exports = TreeChooserItemFactory;\n\n\n\n// WEBPACK FOOTER //\n// ./src/treeChooserItem/treeChooserItem.factory.js"],"sourceRoot":""}